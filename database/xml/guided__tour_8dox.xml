<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="guided__tour_8dox" kind="file" language="C++">
    <compoundname>guided_tour.dox</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a6c80b2ddbe692af440986e1c5b8a2a92a34a8a99e4b85ad4d14c4e984440ed3ac" kindref="member">SSH_KNOWN_HOSTS_CHANGED</ref>:</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Host<sp/>key<sp/>for<sp/>server<sp/>changed:<sp/>it<sp/>is<sp/>now:\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__misc_1ga39bf7936ed51361fe9cf3c3bbfc25514" kindref="member">ssh_print_hexa</ref>(</highlight><highlight class="stringliteral">&quot;Public<sp/>key<sp/>hash&quot;</highlight><highlight class="normal">,<sp/>hash,<sp/>hlen);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;For<sp/>security<sp/>reasons,<sp/>connection<sp/>will<sp/>be<sp/>stopped\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga07827fd70a51ddc4030364f220eb4c9c" kindref="member">ssh_clean_pubkey_hash</ref>(&amp;hash);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a6c80b2ddbe692af440986e1c5b8a2a92a2b96fe3f7b832e29900fe1fc4be9fc31" kindref="member">SSH_KNOWN_HOSTS_OTHER</ref>:</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;The<sp/>host<sp/>key<sp/>for<sp/>this<sp/>server<sp/>was<sp/>not<sp/>found<sp/>but<sp/>an<sp/>other&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;type<sp/>of<sp/>key<sp/>exists.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;An<sp/>attacker<sp/>might<sp/>change<sp/>the<sp/>default<sp/>server<sp/>key<sp/>to&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;confuse<sp/>your<sp/>client<sp/>into<sp/>thinking<sp/>the<sp/>key<sp/>does<sp/>not<sp/>exist\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga07827fd70a51ddc4030364f220eb4c9c" kindref="member">ssh_clean_pubkey_hash</ref>(&amp;hash);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a6c80b2ddbe692af440986e1c5b8a2a92aaf5e72e4735c9268d938c3dd806d9bd4" kindref="member">SSH_KNOWN_HOSTS_NOT_FOUND</ref>:</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Could<sp/>not<sp/>find<sp/>known<sp/>host<sp/>file.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;If<sp/>you<sp/>accept<sp/>the<sp/>host<sp/>key<sp/>here,<sp/>the<sp/>file<sp/>will<sp/>be&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;automatically<sp/>created.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FALL<sp/>THROUGH<sp/>to<sp/>SSH_SERVER_NOT_KNOWN<sp/>behavior<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a6c80b2ddbe692af440986e1c5b8a2a92a9e457e272164bc986939facea9f1b3ec" kindref="member">SSH_KNOWN_HOSTS_UNKNOWN</ref>:</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexa<sp/>=<sp/><ref refid="group__libssh__misc_1ga6ebcfc53884fdc5afb1607c94f8007d4" kindref="member">ssh_get_hexa</ref>(hash,<sp/>hlen);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,</highlight><highlight class="stringliteral">&quot;The<sp/>server<sp/>is<sp/>unknown.<sp/>Do<sp/>you<sp/>trust<sp/>the<sp/>host<sp/>key?\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Public<sp/>key<sp/>hash:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>hexa);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__string_1gafc10700722d6cafc468c2ee97585449a" kindref="member">ssh_string_free_char</ref>(hexa);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga07827fd70a51ddc4030364f220eb4c9c" kindref="member">ssh_clean_pubkey_hash</ref>(&amp;hash);</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/>fgets(buf,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(buf),<sp/>stdin);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmp<sp/>=<sp/>strncasecmp(buf,<sp/></highlight><highlight class="stringliteral">&quot;yes&quot;</highlight><highlight class="normal">,<sp/>3);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmp<sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>=<sp/><ref refid="group__libssh__session_1ga958fdd1aedcd85a5c496c0aa22362d34" kindref="member">ssh_session_update_known_hosts</ref>(<ref refid="torture__session__keys_8c_1a1ea82fff28491cf424fc0753ec725adb" kindref="member">session</ref>);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>strerror(errno));</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a6c80b2ddbe692af440986e1c5b8a2a92a087014218aa8ad17b9d6941b04522306" kindref="member">SSH_KNOWN_HOSTS_ERROR</ref>:</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>%s&quot;</highlight><highlight class="normal">,<sp/><ref refid="group__libssh__error_1ga9241586665bf21f823806473fc386258" kindref="member">ssh_get_error</ref>(<ref refid="torture__session__keys_8c_1a1ea82fff28491cf424fc0753ec725adb" kindref="member">session</ref>));</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga07827fd70a51ddc4030364f220eb4c9c" kindref="member">ssh_clean_pubkey_hash</ref>(&amp;hash);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga07827fd70a51ddc4030364f220eb4c9c" kindref="member">ssh_clean_pubkey_hash</ref>(&amp;hash);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="271"><highlight class="normal">}</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal">code</highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1ga032e07cbd8bc3f14cb2dd375db0b03d7" kindref="member">ssh_connect</ref></highlight></codeline>
<codeline lineno="275"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1ga0f048a4c0dbe02cfb7e9c5b6d0db0f27" kindref="member">ssh_disconnect</ref></highlight></codeline>
<codeline lineno="276"><highlight class="normal">@see<sp/><ref refid="group__libssh__error_1ga9241586665bf21f823806473fc386258" kindref="member">ssh_get_error</ref></highlight></codeline>
<codeline lineno="277"><highlight class="normal">@see<sp/><ref refid="group__libssh__error_1ga036433b7bf3d4ca94206253f58d136f9" kindref="member">ssh_get_error_code</ref></highlight></codeline>
<codeline lineno="278"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1ga5342eefee0497636e9657c968e106782" kindref="member">ssh_get_server_publickey</ref></highlight></codeline>
<codeline lineno="279"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1ga7a7b16a4bed6d8d58f10bdb269172ff7" kindref="member">ssh_get_publickey_hash</ref></highlight></codeline>
<codeline lineno="280"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1gacbc5d04fe66beee863a0c61a93fdf765" kindref="member">ssh_session_is_known_server</ref></highlight></codeline>
<codeline lineno="281"><highlight class="normal">@see<sp/><ref refid="group__libssh__session_1ga958fdd1aedcd85a5c496c0aa22362d34" kindref="member">ssh_session_update_known_hosts</ref></highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal">@subsection<sp/>auth<sp/>Authenticating<sp/>the<sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref></highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal">The<sp/>authentication<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1a9a40fb9a96281a1c138c63fc8b5e35d9" kindref="member">process</ref><sp/>is<sp/>the<sp/>way<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>service<sp/>provider<sp/>can<sp/>identify<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>and<sp/>verify<sp/>his/her<sp/>identity.<sp/>The<sp/>authorization<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1a9a40fb9a96281a1c138c63fc8b5e35d9" kindref="member">process</ref><sp/>is<sp/>about<sp/>enabling</highlight></codeline>
<codeline lineno="288"><highlight class="normal">the<sp/><ref refid="proxy_8c_1a29e86d0f6d62ef1edac10a46e4c92095" kindref="member">authenticated</ref><sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>the<sp/>access<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>resources.<sp/>In<sp/>SSH,<sp/>the<sp/>two<sp/>concepts</highlight></codeline>
<codeline lineno="289"><highlight class="normal">are<sp/>linked.<sp/>After<sp/>authentication,<sp/>the<sp/>server<sp/>can<sp/>grant<sp/>the<sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>access<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref></highlight></codeline>
<codeline lineno="290"><highlight class="normal">several<sp/>resources<sp/>such<sp/>as<sp/><ref refid="sshnetcat_8c_1ad723da1801ae1586eb330380e2d9a912" kindref="member">port</ref><sp/><ref refid="sshnetcat_8c_1ad08dcc6e9fab1b29fbaabbc4db908350" kindref="member">forwarding</ref>,<sp/><ref refid="ssh__client_8c_1a9aee67bdbbcaaca080f23c622d7d38d9" kindref="member">shell</ref>,<sp/>sftp<sp/>subsystem,<sp/>and<sp/>so<sp/>on.</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal">libssh<sp/>supports<sp/>several<sp/>methods<sp/>of<sp/>authentication:</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/>-<sp/></highlight><highlight class="stringliteral">&quot;none&quot;</highlight><highlight class="normal"><sp/>method.<sp/>This<sp/>method<sp/>allows<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>get<sp/>the<sp/>available<sp/>authentications</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/>methods.<sp/>It<sp/>also<sp/>gives<sp/>the<sp/>server<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>chance<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/><ref refid="samplesshd-kbdint_8c_1a14ddec7b35f889adcbfb0ab1f5976d38" kindref="member">authenticate</ref><sp/>the<sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>with</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/>just<sp/>his/her<sp/>login.<sp/>Some<sp/>very<sp/>old<sp/>hardware<sp/>uses<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal"><sp/>feature<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>fallback</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/>the<sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>on<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/></highlight><highlight class="stringliteral">&quot;telnet<sp/>over<sp/>SSH&quot;</highlight><highlight class="normal"><sp/>style<sp/>of<sp/>login.</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/>-<sp/>password<sp/>method.<sp/>A<sp/>password<sp/>is<sp/>sent<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>the<sp/>server,<sp/>which<sp/>accepts<sp/>it<sp/>or<sp/>not.</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/>-<sp/>keyboard-interactive<sp/>method.<sp/>The<sp/>server<sp/>sends<sp/>several<sp/>challenges<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>the</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref>,<sp/>who<sp/>must<sp/>answer<sp/>correctly.<sp/>This<sp/>makes<sp/>possible<sp/>the<sp/>authentication</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/>via<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>codebook<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>instance<sp/>(</highlight><highlight class="stringliteral">&quot;give<sp/>code<sp/>at<sp/>23:R<sp/>on<sp/>page<sp/>3&quot;</highlight><highlight class="normal">).</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/>-<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="torture__crypto_8c_1a42363914b961236c71004e83b3b66a1b" kindref="member">key</ref><sp/>method.<sp/>The<sp/><ref refid="sshnetcat_8c_1a1c2046dcb30a629d6d9f45ff8f403f12" kindref="member">host</ref><sp/>knows<sp/>the<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="torture__crypto_8c_1a42363914b961236c71004e83b3b66a1b" kindref="member">key</ref><sp/>of<sp/>the<sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref>,<sp/>and<sp/>the</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><ref refid="ssh__client_8c_1a14871705f45ccdc5bb9f4549efd8e119" kindref="member">user</ref><sp/>must<sp/>prove<sp/>he<sp/>knows<sp/>the<sp/>associated<sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="torture__crypto_8c_1a42363914b961236c71004e83b3b66a1b" kindref="member">key</ref>.<sp/>This<sp/>can<sp/>be<sp/>done</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/>manually,<sp/>or<sp/>delegated<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>the<sp/>SSH<sp/>agent<sp/>as<sp/>we</highlight><highlight class="stringliteral">&apos;ll<sp/>see<sp/>later.</highlight></codeline>
<codeline lineno="304"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="305"><highlight class="stringliteral">All<sp/>these<sp/>methods<sp/>can<sp/>be<sp/>combined.<sp/>You<sp/>can<sp/>for<sp/>instance<sp/>force<sp/>the<sp/>user<sp/>to</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral">authenticate<sp/>with<sp/>at<sp/>least<sp/>two<sp/>of<sp/>the<sp/>authentication<sp/>methods.<sp/>In<sp/>that<sp/>case,</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral">one<sp/>speaks<sp/>of<sp/>&quot;Partial<sp/>authentication&quot;.<sp/>A<sp/>partial<sp/>authentication<sp/>is<sp/>a</highlight></codeline>
<codeline lineno="308"><highlight class="stringliteral">response<sp/>from<sp/>authentication<sp/>functions<sp/>stating<sp/>that<sp/>your<sp/>credential<sp/>was</highlight></codeline>
<codeline lineno="309"><highlight class="stringliteral">accepted,<sp/>but<sp/>yet<sp/>another<sp/>one<sp/>is<sp/>required<sp/>to<sp/>get<sp/>in.</highlight></codeline>
<codeline lineno="310"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="311"><highlight class="stringliteral">The<sp/>example<sp/>below<sp/>shows<sp/>an<sp/>authentication<sp/>with<sp/>password:</highlight></codeline>
<codeline lineno="312"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="313"><highlight class="stringliteral">@code</highlight></codeline>
<codeline lineno="314"><highlight class="stringliteral">#include<sp/>&lt;libssh/libssh.h&gt;</highlight></codeline>
<codeline lineno="315"><highlight class="stringliteral">#include<sp/>&lt;stdlib.h&gt;</highlight></codeline>
<codeline lineno="316"><highlight class="stringliteral">#include<sp/>&lt;stdio.h&gt;</highlight></codeline>
<codeline lineno="317"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="318"><highlight class="stringliteral">int<sp/>main()</highlight></codeline>
<codeline lineno="319"><highlight class="stringliteral">{</highlight></codeline>
<codeline lineno="320"><highlight class="stringliteral"><sp/><sp/>ssh_session<sp/>my_ssh_session;</highlight></codeline>
<codeline lineno="321"><highlight class="stringliteral"><sp/><sp/>int<sp/>rc;</highlight></codeline>
<codeline lineno="322"><highlight class="stringliteral"><sp/><sp/>char<sp/>*password;</highlight></codeline>
<codeline lineno="323"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="324"><highlight class="stringliteral"><sp/><sp/>//<sp/>Open<sp/>session<sp/>and<sp/>set<sp/>options</highlight></codeline>
<codeline lineno="325"><highlight class="stringliteral"><sp/><sp/>my_ssh_session<sp/>=<sp/>ssh_new();</highlight></codeline>
<codeline lineno="326"><highlight class="stringliteral"><sp/><sp/>if<sp/>(my_ssh_session<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="327"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>exit(-1);</highlight></codeline>
<codeline lineno="328"><highlight class="stringliteral"><sp/><sp/>ssh_options_set(my_ssh_session,<sp/>SSH_OPTIONS_HOST,<sp/>&quot;localhost&quot;);</highlight></codeline>
<codeline lineno="329"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="330"><highlight class="stringliteral"><sp/><sp/>//<sp/>Connect<sp/>to<sp/>server</highlight></codeline>
<codeline lineno="331"><highlight class="stringliteral"><sp/><sp/>rc<sp/>=<sp/>ssh_connect(my_ssh_session);</highlight></codeline>
<codeline lineno="332"><highlight class="stringliteral"><sp/><sp/>if<sp/>(rc<sp/>!=<sp/>SSH_OK)</highlight></codeline>
<codeline lineno="333"><highlight class="stringliteral"><sp/><sp/>{</highlight></codeline>
<codeline lineno="334"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/>&quot;Error<sp/>connecting<sp/>to<sp/>localhost:<sp/>%s\n&quot;,</highlight></codeline>
<codeline lineno="335"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssh_get_error(my_ssh_session));</highlight></codeline>
<codeline lineno="336"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>ssh_free(my_ssh_session);</highlight></codeline>
<codeline lineno="337"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>exit(-1);</highlight></codeline>
<codeline lineno="338"><highlight class="stringliteral"><sp/><sp/>}</highlight></codeline>
<codeline lineno="339"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="340"><highlight class="stringliteral"><sp/><sp/>//<sp/>Verify<sp/>the<sp/>server&apos;</highlight><highlight class="normal"><ref refid="test__socket_8c_1a73991beba1accdcc64730cb00c146fe2" kindref="member">s</ref><sp/>identity</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>the<sp/>source<sp/>code<sp/>of<sp/>verify_knownhost(),<sp/>check<sp/>previous<sp/>example</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="examples__common_8h_1ad5d8ab97d3635ecaf8fa78225cb960fb" kindref="member">verify_knownhost</ref>(my_ssh_session)<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga0f048a4c0dbe02cfb7e9c5b6d0db0f27" kindref="member">ssh_disconnect</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1gae5af27a98a7488e9f5ded6b37c274156" kindref="member">ssh_free</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/>exit(-1);</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Authenticate<sp/>ourselves</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/>password<sp/>=<sp/>getpass(</highlight><highlight class="stringliteral">&quot;Password:<sp/>&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>=<sp/><ref refid="group__libssh__auth_1ga50c0c150f8c4703e7ee49b3e3e3ca215" kindref="member">ssh_userauth_password</ref>(my_ssh_session,<sp/>NULL,<sp/>password);</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>!=<sp/><ref refid="libssh_8h_1a5b35a5038ad8eac4a4e4c00c6239e6e2ab145398ebf554c3cc5d6acfb241c5235" kindref="member">SSH_AUTH_SUCCESS</ref>)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>authenticating<sp/>with<sp/>password:<sp/>%s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__error_1ga9241586665bf21f823806473fc386258" kindref="member">ssh_get_error</ref>(my_ssh_session));</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1ga0f048a4c0dbe02cfb7e9c5b6d0db0f27" kindref="member">ssh_disconnect</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__session_1gae5af27a98a7488e9f5ded6b37c274156" kindref="member">ssh_free</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>exit(-1);</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/>...</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><ref refid="group__libssh__session_1ga0f048a4c0dbe02cfb7e9c5b6d0db0f27" kindref="member">ssh_disconnect</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><ref refid="group__libssh__session_1gae5af27a98a7488e9f5ded6b37c274156" kindref="member">ssh_free</ref>(my_ssh_session);</highlight></codeline>
<codeline lineno="365"><highlight class="normal">}</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal">code</highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal">@see<sp/>@ref<sp/>authentication_details</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal">@subsection<sp/>using_ssh<sp/>Doing<sp/>something</highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal">At<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal"><sp/>point,<sp/>the<sp/>authenticity<sp/>of<sp/>both<sp/>server<sp/>and<sp/><ref refid="ssh__client_8c_1a0d3591711bd7d6cb03d42294115721bb" kindref="member">client</ref><sp/>is<sp/>established.</highlight></codeline>
<codeline lineno="374"><highlight class="normal">Time<sp/>has<sp/>come<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>take<sp/>advantage<sp/>of<sp/>the<sp/>many<sp/>possibilities<sp/>offered<sp/>by<sp/>the<sp/>SSH</highlight></codeline>
<codeline lineno="375"><highlight class="normal">protocol:<sp/>execute<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>remote<sp/>command,<sp/>open<sp/>remote<sp/>shells,<sp/>transfer<sp/>files,</highlight></codeline>
<codeline lineno="376"><highlight class="normal">forward<sp/>ports,<sp/>etc.</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal">The<sp/>example<sp/>below<sp/>shows<sp/>how<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>execute<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>remote<sp/>command:</highlight></codeline>
<codeline lineno="379"><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal">@code</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>show_remote_processes(<ref refid="structssh__session__struct" kindref="compound">ssh_session</ref><sp/><ref refid="torture__session__keys_8c_1a1ea82fff28491cf424fc0753ec725adb" kindref="member">session</ref>)</highlight></codeline>
<codeline lineno="382"><highlight class="normal">{</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><ref refid="structssh__channel__struct" kindref="compound">ssh_channel</ref><sp/>channel;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref>;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>[256];</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nbytes;</highlight></codeline>
<codeline lineno="387"><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/>channel<sp/>=<sp/><ref refid="group__libssh__channel_1gada8ccda7bf65165fe145d3096a252dcc" kindref="member">ssh_channel_new</ref>(<ref refid="torture__session__keys_8c_1a1ea82fff28491cf424fc0753ec725adb" kindref="member">session</ref>);</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(channel<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a790179ef432b3b59aaccd9adab0169ec" kindref="member">SSH_ERROR</ref>;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>=<sp/><ref refid="group__libssh__channel_1gaf051dd30d75bf6dc45d1a5088cf970bd" kindref="member">ssh_channel_open_session</ref>(channel);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>!=<sp/><ref refid="libssh_8h_1ac1ee1d1e917456d4760a94a18015377d" kindref="member">SSH_OK</ref>)</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1gad1417f9eae8928fed20faafe2d9dbfff" kindref="member">ssh_channel_free</ref>(channel);</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref>;</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>=<sp/><ref refid="group__libssh__channel_1ga567d509183ade0a77190f390e2b5747d" kindref="member">ssh_channel_request_exec</ref>(channel,<sp/></highlight><highlight class="stringliteral">&quot;ps<sp/>aux&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref><sp/>!=<sp/><ref refid="libssh_8h_1ac1ee1d1e917456d4760a94a18015377d" kindref="member">SSH_OK</ref>)</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1ga238f07e0455456a5bfd8a49ead917732" kindref="member">ssh_channel_close</ref>(channel);</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1gad1417f9eae8928fed20faafe2d9dbfff" kindref="member">ssh_channel_free</ref>(channel);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pkd__daemon_8c_1ac6509c6fe4cbf7bde170597172f8a288" kindref="member">rc</ref>;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/>nbytes<sp/>=<sp/><ref refid="group__libssh__channel_1gac92381c4c5d4a7eab35f6e84686f033d" kindref="member">ssh_channel_read</ref>(channel,<sp/><ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>),<sp/>0);</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(nbytes<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(write(1,<sp/><ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>,<sp/>nbytes)<sp/>!=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>nbytes)</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1ga238f07e0455456a5bfd8a49ead917732" kindref="member">ssh_channel_close</ref>(channel);</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1gad1417f9eae8928fed20faafe2d9dbfff" kindref="member">ssh_channel_free</ref>(channel);</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a790179ef432b3b59aaccd9adab0169ec" kindref="member">SSH_ERROR</ref>;</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/>nbytes<sp/>=<sp/><ref refid="group__libssh__channel_1gac92381c4c5d4a7eab35f6e84686f033d" kindref="member">ssh_channel_read</ref>(channel,<sp/><ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="benchmarks_8c_1aff2566f4c366b48d73479bef43ee4d2e" kindref="member">buffer</ref>),<sp/>0);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nbytes<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1ga238f07e0455456a5bfd8a49ead917732" kindref="member">ssh_channel_close</ref>(channel);</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__libssh__channel_1gad1417f9eae8928fed20faafe2d9dbfff" kindref="member">ssh_channel_free</ref>(channel);</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1a790179ef432b3b59aaccd9adab0169ec" kindref="member">SSH_ERROR</ref>;</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><ref refid="group__libssh__channel_1ga072f82fdf3e50514f747653af2c99004" kindref="member">ssh_channel_send_eof</ref>(channel);</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><ref refid="group__libssh__channel_1ga238f07e0455456a5bfd8a49ead917732" kindref="member">ssh_channel_close</ref>(channel);</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><ref refid="group__libssh__channel_1gad1417f9eae8928fed20faafe2d9dbfff" kindref="member">ssh_channel_free</ref>(channel);</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="libssh_8h_1ac1ee1d1e917456d4760a94a18015377d" kindref="member">SSH_OK</ref>;</highlight></codeline>
<codeline lineno="431"><highlight class="normal">}</highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal">code</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal">Each<sp/><ref refid="group__libssh__channel_1ga567d509183ade0a77190f390e2b5747d" kindref="member">ssh_channel_request_exec</ref>()<sp/>needs<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>be<sp/>run<sp/>on<sp/>freshly<sp/>created</highlight></codeline>
<codeline lineno="435"><highlight class="normal">and<sp/><ref refid="test__socket_8c_1a98cfb3ef0de2edd3aa1f882197e66a42" kindref="member">connected</ref><sp/>(with<sp/><ref refid="group__libssh__channel_1gaf051dd30d75bf6dc45d1a5088cf970bd" kindref="member">ssh_channel_open_session</ref>())<sp/>channel.</highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal">@see<sp/>@ref<sp/>opening_shell</highlight></codeline>
<codeline lineno="438"><highlight class="normal">@see<sp/>@ref<sp/>remote_command</highlight></codeline>
<codeline lineno="439"><highlight class="normal">@see<sp/>@ref<sp/>sftp_subsystem</highlight></codeline>
<codeline lineno="440"><highlight class="normal">@see<sp/>@ref<sp/>scp_subsystem</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal">@subsection<sp/>errors<sp/>Handling<sp/>the<sp/>errors</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal">All<sp/>the<sp/>libssh<sp/>functions<sp/>which<sp/>return<sp/>an<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>value<sp/>also<sp/><ref refid="CMakeLists_8txt_1aedfdfd01a75aededaea39dc830001b75" kindref="member">set</ref><sp/>an<sp/>English<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>message</highlight></codeline>
<codeline lineno="446"><highlight class="normal">describing<sp/>the<sp/>problem.</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal">Error<sp/>values<sp/>are<sp/>typically<sp/><ref refid="libssh_8h_1a790179ef432b3b59aaccd9adab0169ec" kindref="member">SSH_ERROR</ref><sp/>for<sp/>integer<sp/>values,<sp/>or<sp/>NULL<sp/>for<sp/>pointers.</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal">The<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1a7a7f57a53d58d3bb7fcdec4c55efa962" kindref="member">function</ref><sp/><ref refid="group__libssh__error_1ga9241586665bf21f823806473fc386258" kindref="member">ssh_get_error</ref>()<sp/>returns<sp/><ref refid="namespacegenerate_1a3bb1e673073a90dc0b8d1659852706e3" kindref="member">a</ref><sp/>pointer<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>the<sp/>static<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>message.</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal">ssh_error_code()<sp/>returns<sp/>the<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>code<sp/>number<sp/>:<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1ac3aceef794ead7991dc7a2d0cf93f5c5" kindref="member">SSH_NO_ERROR</ref>,</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1ad1339fb4b92a9d25bdb99df5de5c4f88" kindref="member">SSH_REQUEST_DENIED</ref>,<sp/>SSH_INVALID_REQUEST,<sp/>SSH_CONNECTION_LOST,<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1a86ff0b2e8da6ad8628efc556b6ce1887" kindref="member">SSH_FATAL</ref>,</highlight></codeline>
<codeline lineno="454"><highlight class="normal">or<sp/>SSH_INVALID_DATA.<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1ad1339fb4b92a9d25bdb99df5de5c4f88" kindref="member">SSH_REQUEST_DENIED</ref><sp/>means<sp/>the<sp/><ref refid="namespacessh" kindref="compound">ssh</ref><sp/>server<sp/>refused<sp/>your</highlight></codeline>
<codeline lineno="455"><highlight class="normal">request,<sp/>but<sp/>the<sp/>situation<sp/>is<sp/>recoverable.<sp/>The<sp/>others<sp/>mean<sp/>something<sp/>happened</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>the<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1acf23df4cc7761ed915ae88187c7e028c" kindref="member">connection</ref><sp/>(some<sp/>encryption<sp/>problems,<sp/>server<sp/>problems,<sp/>...).</highlight></codeline>
<codeline lineno="457"><highlight class="normal">SSH_INVALID_REQUEST<sp/>means<sp/>the<sp/>library<sp/>got<sp/>some<sp/>garbage<sp/>from<sp/>server,<sp/>but</highlight></codeline>
<codeline lineno="458"><highlight class="normal">might<sp/>be<sp/>recoverable.<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1a86ff0b2e8da6ad8628efc556b6ce1887" kindref="member">SSH_FATAL</ref><sp/>means<sp/>the<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1acf23df4cc7761ed915ae88187c7e028c" kindref="member">connection</ref><sp/>has<sp/>an<sp/>important</highlight></codeline>
<codeline lineno="459"><highlight class="normal">problem<sp/>and<sp/>isn&apos;t<sp/>probably<sp/>recoverable.</highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal">Most<sp/>of<sp/><ref refid="curve25519-sha256_0dlibssh_8org_8txt_1a64e3b3da47d2dcb5585763c1a7036884" kindref="member">time</ref>,<sp/>the<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>returned<sp/>are<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1a86ff0b2e8da6ad8628efc556b6ce1887" kindref="member">SSH_FATAL</ref>,<sp/>but<sp/>some<sp/>functions</highlight></codeline>
<codeline lineno="462"><highlight class="normal">(generally<sp/>the<sp/>ssh_request_xxx<sp/>ones)<sp/>may<sp/>fail<sp/>because<sp/>of<sp/>server<sp/>denying<sp/>request.</highlight></codeline>
<codeline lineno="463"><highlight class="normal">In<sp/>these<sp/>cases,<sp/><ref refid="libssh_8h_1a036b2b00fb04337a4d06d719d1b62be1ad1339fb4b92a9d25bdb99df5de5c4f88" kindref="member">SSH_REQUEST_DENIED</ref><sp/>is<sp/>returned.</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal">For<sp/><ref refid="sftp__stress_2main_8c_1a7d27db85acc5db3bf9f28ba47d342d6c" kindref="member">thread</ref><sp/>safety,<sp/>errors<sp/>are<sp/>bound<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/><ref refid="structssh__session__struct" kindref="compound">ssh_session</ref><sp/>objects.</highlight></codeline>
<codeline lineno="466"><highlight class="normal">As<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>as<sp/>your<sp/><ref refid="structssh__session__struct" kindref="compound">ssh_session</ref><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/>is<sp/>not<sp/>NULL,<sp/>you<sp/>can<sp/>retrieve<sp/>the<sp/>last<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref></highlight></codeline>
<codeline lineno="467"><highlight class="normal">message<sp/>and<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>code<sp/>from<sp/>the<sp/><ref refid="structssh__session__struct" kindref="compound">ssh_session</ref><sp/>using<sp/><ref refid="group__libssh__error_1ga9241586665bf21f823806473fc386258" kindref="member">ssh_get_error</ref>()<sp/>and</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><ref refid="group__libssh__error_1ga036433b7bf3d4ca94206253f58d136f9" kindref="member">ssh_get_error_code</ref>()<sp/>respectively.</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal">The<sp/>SFTP<sp/>subsystem<sp/>has<sp/>its<sp/>own<sp/><ref refid="proxy_8c_1a11614f44ef4d939bdd984953346a7572" kindref="member">error</ref><sp/>codes,<sp/>in<sp/>addition<sp/><ref refid="CMakeLists_8txt_1a76a1d017bd4c4089f326a74356e88edb" kindref="member">to</ref><sp/>libssh<sp/>ones.</highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal">*/</highlight></codeline>
    </programlisting>
    <location file="libssh-mirror/doc/guided_tour.dox"/>
  </compounddef>
</doxygen>
